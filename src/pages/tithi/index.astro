---
/**
 * Tithi Hub Page
 *
 * Overview of all tithis (lunar days) with:
 * - Quick answer for tithi queries
 * - Grid of all 16 unique tithis
 * - JSON-LD ItemList schema for SEO
 */
import Layout from '../../layouts/Layout.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';
import type { BreadcrumbItem } from '../../lib/types';
import type { TithiData } from '../../data/types';
import { tithiNatureColors as natureColors, elementIcons } from '../../lib/color-maps';

// Load tithis data
import tithisData from '../../data/tithis.json';
const tithis = tithisData as TithiData[];

// Page meta
const title = 'Tithi - Lunar Days in Hindu Calendar | Complete Guide | Shree Kundli';
const description = 'Learn about all 30 Tithis (lunar days) in Hindu Panchang. Pratipada to Purnima/Amavasya - know the significance, deity, nature, and auspicious activities for each tithi.';

// Breadcrumbs
const breadcrumbs: BreadcrumbItem[] = [
  { name: 'Home', url: '/' },
  { name: 'Tithi' },
];

// Schema for tithi list
const tithiListSchema = {
  '@context': 'https://schema.org',
  '@type': 'ItemList',
  name: 'Tithis - Lunar Days in Hindu Calendar',
  description: 'Complete guide to all tithis (lunar days) used in Vedic astrology and Hindu Panchang',
  numberOfItems: tithis.length,
  itemListElement: tithis.map((tithi, index) => ({
    '@type': 'ListItem',
    position: index + 1,
    item: {
      '@type': 'Article',
      name: `${tithi.name} (${tithi.nameHindi})`,
      alternateName: tithi.nameHindi,
      description: tithi.description,
      url: `/tithi/${tithi.slug}`,
    },
  })),
};

// FAQ schema
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'What is Tithi in Hindu Calendar?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Tithi is a lunar day in the Hindu calendar, one of the five elements of Panchang. It represents the angular relationship between the Sun and Moon. Each lunar month has 30 tithis - 15 in Shukla Paksha (waxing moon) and 15 in Krishna Paksha (waning moon). The tithis range from Pratipada (first) to Purnima (full moon) or Amavasya (new moon).',
      },
    },
    {
      '@type': 'Question',
      name: 'How many Tithis are there?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'There are 30 tithis in a lunar month - 15 unique tithis that repeat in both Shukla Paksha (bright half) and Krishna Paksha (dark half). The tithis are: Pratipada, Dwitiya, Tritiya, Chaturthi, Panchami, Shashthi, Saptami, Ashtami, Navami, Dashami, Ekadashi, Dwadashi, Trayodashi, Chaturdashi, and Purnima/Amavasya.',
      },
    },
    {
      '@type': 'Question',
      name: 'Which Tithi is most auspicious?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Purnima (Full Moon), Dashami, Ekadashi, and Tritiya are considered highly auspicious. Ekadashi is especially sacred for Vishnu worship and fasting. Akshaya Tritiya and Vijayadashami are among the most auspicious days of the year. However, the auspiciousness also depends on other Panchang elements.',
      },
    },
  ],
};
---

<Layout title={title} description={description}>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(tithiListSchema)} slot="head" />
  <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} slot="head" />

  <div class="space-y-8">
    <!-- Breadcrumb -->
    <Breadcrumb items={breadcrumbs} />

    <!-- Header -->
    <header class="text-center space-y-4">
      <h1 class="font-heading text-3xl md:text-4xl text-primary font-bold">
        Tithi
      </h1>
      <p class="text-lg text-neutral/70 max-w-2xl mx-auto">
        Lunar Days in Hindu Panchang
      </p>
    </header>

    <!-- Quick Answer (AI Extraction Target) -->
    <section class="quick-answer" role="contentinfo">
      <div class="glass-elevated">
        <div class="p-4 md:p-6">
          <h2 class="font-heading text-xl text-primary font-semibold mb-4">
            What is Tithi?
          </h2>
          <p class="text-neutral/80 leading-relaxed">
            <strong>Tithi</strong> is a lunar day in the Hindu calendar, representing the angular distance between the Sun and Moon.
            It is one of the five elements (Panchangas) used in Vedic astrology. Each lunar month has <strong>30 tithis</strong> -
            15 in <em>Shukla Paksha</em> (waxing moon) and 15 in <em>Krishna Paksha</em> (waning moon).
          </p>
          <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mt-4">
            <div class="text-center p-3 bg-green-500/10 rounded-lg">
              <p class="text-sm text-neutral/60">Nanda</p>
              <p class="font-semibold text-green-600">1, 6, 11</p>
            </div>
            <div class="text-center p-3 bg-info/10 rounded-lg">
              <p class="text-sm text-neutral/60">Bhadra</p>
              <p class="font-semibold text-info">2, 7, 12</p>
            </div>
            <div class="text-center p-3 bg-purple-500/10 rounded-lg">
              <p class="text-sm text-neutral/60">Jaya</p>
              <p class="font-semibold text-purple-600">3, 8, 13</p>
            </div>
            <div class="text-center p-3 bg-red-500/10 rounded-lg">
              <p class="text-sm text-neutral/60">Rikta</p>
              <p class="font-semibold text-red-600">4, 9, 14</p>
            </div>
            <div class="text-center p-3 bg-amber-500/10 rounded-lg">
              <p class="text-sm text-neutral/60">Purna</p>
              <p class="font-semibold text-amber-600">5, 10, 15</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tithi Grid -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-6">
        All Tithis (15 Lunar Days)
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {tithis.slice(0, 15).map((tithi) => (
          <a
            href={`/tithi/${tithi.slug}`}
            class="glass-card hover:border-secondary/30 hover:shadow-md transition-all"
          >
            <div class="p-4">
              <div class="flex items-start gap-4">
                <!-- Number Badge -->
                <div class={`w-12 h-12 flex items-center justify-center rounded-xl font-bold text-lg border ${tithi.auspicious ? 'bg-green-500/10 text-green-600 border-green-500/20' : 'bg-red-500/10 text-red-600 border-red-500/20'}`}>
                  {tithi.number}
                </div>

                <!-- Info -->
                <div class="grow min-w-0">
                  <div class="flex items-center gap-2">
                    <h3 class="font-heading text-lg font-semibold text-primary">
                      {tithi.nameHindi}
                    </h3>
                    <span class="text-sm text-neutral/60">({tithi.name})</span>
                  </div>
                  <p class="text-sm text-neutral/60 mt-1">{tithi.meaning}</p>
                  <div class="flex items-center gap-2 mt-2 text-sm">
                    <span class={`px-2 py-0.5 rounded border text-xs ${natureColors[tithi.nature] || 'bg-base-200'}`}>
                      {tithi.natureHindi}
                    </span>
                    <span class="text-neutral/30">â€¢</span>
                    <span class="text-neutral/60">{elementIcons[tithi.element]} {tithi.element}</span>
                  </div>
                </div>

                <!-- Arrow -->
                <svg
                  class="w-5 h-5 text-neutral/40 shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </div>
            </div>
          </a>
        ))}
      </div>
    </section>

    <!-- Special Tithis -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-6">
        Special Tithis
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {tithis.slice(14, 16).map((tithi) => (
          <a
            href={`/tithi/${tithi.slug}`}
            class={`card border hover:shadow-md transition-all ${tithi.name === 'Purnima' ? 'bg-amber-500/10 border-amber-500/30' : 'bg-slate-500/10 border-slate-500/30'}`}
          >
            <div class="card-body p-6">
              <div class="flex items-start gap-4">
                <!-- Moon Icon -->
                <div class="text-4xl">
                  {tithi.name === 'Purnima' ? 'ðŸŒ•' : 'ðŸŒ‘'}
                </div>

                <!-- Info -->
                <div class="grow">
                  <h3 class="font-heading text-xl font-semibold text-primary">
                    {tithi.nameHindi}
                  </h3>
                  <p class="text-neutral/70">{tithi.name} - {tithi.meaning}</p>
                  <p class="text-sm text-neutral/60 mt-2">{tithi.description.substring(0, 100)}...</p>
                  <div class="flex flex-wrap gap-2 mt-3">
                    {tithi.festivals.slice(0, 3).map((festival) => (
                      <span class="badge badge-outline text-xs">{festival}</span>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </a>
        ))}
      </div>
    </section>

    <!-- Nature Groups -->
    <section>
      <h2 class="font-heading text-xl text-primary font-semibold mb-4">
        Tithi Nature Groups
      </h2>
      <div class="glass-card">
        <div class="p-4">
          <div class="grid grid-cols-1 md:grid-cols-5 gap-4 text-sm">
            <div>
              <p class="font-semibold text-green-600 mb-1">Nanda</p>
              <p class="text-neutral/60">Joy & Happiness</p>
              <p class="text-xs text-neutral/50 mt-1">Tithis: 1, 6, 11</p>
            </div>
            <div>
              <p class="font-semibold text-info mb-1">Bhadra</p>
              <p class="text-neutral/60">Auspicious</p>
              <p class="text-xs text-neutral/50 mt-1">Tithis: 2, 7, 12</p>
            </div>
            <div>
              <p class="font-semibold text-purple-600 mb-1">Jaya</p>
              <p class="text-neutral/60">Victory</p>
              <p class="text-xs text-neutral/50 mt-1">Tithis: 3, 8, 13</p>
            </div>
            <div>
              <p class="font-semibold text-red-600 mb-1">Rikta</p>
              <p class="text-neutral/60">Empty (Inauspicious)</p>
              <p class="text-xs text-neutral/50 mt-1">Tithis: 4, 9, 14</p>
            </div>
            <div>
              <p class="font-semibold text-amber-600 mb-1">Purna</p>
              <p class="text-neutral/60">Full & Complete</p>
              <p class="text-xs text-neutral/50 mt-1">Tithis: 5, 10, 15</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Paksha Explanation -->
    <section>
      <h2 class="font-heading text-xl text-primary font-semibold mb-4">
        Shukla and Krishna Paksha
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="card bg-amber-500/5 border border-amber-500/20">
          <div class="card-body p-4">
            <div class="flex items-center gap-3 mb-2">
              <span class="text-3xl">ðŸŒ“</span>
              <h3 class="font-semibold text-primary">Shukla Paksha</h3>
            </div>
            <p class="text-sm text-neutral/70">
              The bright fortnight from New Moon to Full Moon. The Moon waxes (increases) during this period.
              Generally considered more auspicious for new beginnings, celebrations, and positive activities.
            </p>
            <p class="text-xs text-neutral/50 mt-2">Pratipada â†’ Purnima</p>
          </div>
        </div>
        <div class="card bg-slate-500/5 border border-slate-500/20">
          <div class="card-body p-4">
            <div class="flex items-center gap-3 mb-2">
              <span class="text-3xl">ðŸŒ—</span>
              <h3 class="font-semibold text-primary">Krishna Paksha</h3>
            </div>
            <p class="text-sm text-neutral/70">
              The dark fortnight from Full Moon to New Moon. The Moon wanes (decreases) during this period.
              Suitable for introspection, ancestor worship, and completing pending tasks.
            </p>
            <p class="text-xs text-neutral/50 mt-2">Pratipada â†’ Amavasya</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-4">
        Frequently Asked Questions
      </h2>
      <div class="space-y-4">
        <div class="collapse collapse-arrow glass-card">
          <input type="radio" name="faq" checked />
          <div class="collapse-title font-medium">
            What is Tithi in Hindu Calendar?
          </div>
          <div class="collapse-content">
            <p>Tithi is a lunar day in the Hindu calendar, one of the five elements of Panchang. It represents the angular relationship between the Sun and Moon. Each lunar month has 30 tithis - 15 in Shukla Paksha (waxing moon) and 15 in Krishna Paksha (waning moon).</p>
          </div>
        </div>

        <div class="collapse collapse-arrow glass-card">
          <input type="radio" name="faq" />
          <div class="collapse-title font-medium">
            How many Tithis are there?
          </div>
          <div class="collapse-content">
            <p>There are 30 tithis in a lunar month - 15 unique tithis that repeat in both Shukla Paksha (bright half) and Krishna Paksha (dark half). The tithis are: Pratipada, Dwitiya, Tritiya, Chaturthi, Panchami, Shashthi, Saptami, Ashtami, Navami, Dashami, Ekadashi, Dwadashi, Trayodashi, Chaturdashi, and Purnima/Amavasya.</p>
          </div>
        </div>

        <div class="collapse collapse-arrow glass-card">
          <input type="radio" name="faq" />
          <div class="collapse-title font-medium">
            Which Tithi is most auspicious?
          </div>
          <div class="collapse-content">
            <p>Purnima (Full Moon), Dashami, Ekadashi, and Tritiya are considered highly auspicious. Ekadashi is especially sacred for Vishnu worship and fasting. Akshaya Tritiya and Vijayadashami are among the most auspicious days of the year.</p>
          </div>
        </div>

        <div class="collapse collapse-arrow glass-card">
          <input type="radio" name="faq" />
          <div class="collapse-title font-medium">
            What are Rikta Tithis?
          </div>
          <div class="collapse-content">
            <p>Rikta tithis (4, 9, 14) are considered "empty" or inauspicious for starting new ventures. However, they can be suitable for activities like defeating enemies, tantric practices, or completing difficult tasks. The inauspiciousness can be mitigated by other favorable Panchang elements.</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>
