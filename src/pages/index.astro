---
/**
 * Homepage - Shreeng
 *
 * AI-optimized landing page with:
 * - Hero section with cosmic gradient
 * - Quick answer for "today's panchang" queries
 * - Rashi grid for zodiac navigation
 * - Upcoming festivals section
 * - Feature cards for main sections
 * - Popular cities for SEO
 * - JSON-LD WebSite schema
 */
import Layout from '../layouts/Layout.astro';
import GlassCard from '../components/cards/GlassCard.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import TodayPanchang from '../components/sections/TodayPanchang.astro';
import RashiGrid from '../components/sections/RashiGrid.astro';
import UpcomingFestivals from '../components/sections/UpcomingFestivals.astro';
import PopularCities from '../components/sections/PopularCities.astro';
import type { City } from '../lib/types';

// Load cities data
import citiesData from '../data/cities-sample.json';
const cities = citiesData as City[];

// Default city (can be changed based on user preference/geolocation)
const defaultCity = cities.find(c => c.slug === 'delhi') || cities[0];

// Today's date
const today = new Date();
const dateOptions: Intl.DateTimeFormatOptions = {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric',
};
const todayFormatted = today.toLocaleDateString('en-IN', dateOptions);

// Page meta
const title = 'Shreeng - Vedic Astrology, Panchang & Kundli';
const description = `Check today's panchang, tithi, nakshatra, rahu kaal for ${defaultCity.name}. Free kundli, rashifal, muhurat finder & Hindu festival calendar. Accurate Vedic astrology powered by Swiss Ephemeris.`;

// WebSite schema for homepage
const websiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: 'Shreeng',
  alternateName: ['Shreeng Astrology', 'Shreeng Panchang'],
  url: Astro.site?.toString() || 'https://shreeng.com',
  description: 'Comprehensive Vedic Astrology platform for Panchang, Kundli, Rashifal, Muhurat and Hindu Festival information.',
  potentialAction: {
    '@type': 'SearchAction',
    target: {
      '@type': 'EntryPoint',
      urlTemplate: `${Astro.site || 'https://shreeng.com'}/search?q={search_term_string}`,
    },
    'query-input': 'required name=search_term_string',
  },
  inLanguage: ['en-IN', 'hi-IN'],
  publisher: {
    '@type': 'Organization',
    name: 'Shreeng',
  },
};
---

<Layout title={title} description={description} activeNav="home">
  <!-- JSON-LD Schema -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(websiteSchema)} slot="head" />

  <div class="space-y-8 md:space-y-12">
    <!-- Hero Section -->
    <HeroSection
      title="Vedic Astrology & Panchang"
      subtitle="Accurate Hindu calendar, muhurat times, and daily horoscope for your city"
      currentCity={defaultCity.name}
      currentCitySlug={defaultCity.slug}
      todayDate={todayFormatted}
    />

    <!-- Today's Panchang Quick Summary -->
    <TodayPanchang
      city={defaultCity.name}
      citySlug={defaultCity.slug}
      title="Today's Panchang"
    />

    <!-- Rashifal Grid -->
    <RashiGrid
      title="Today's Rashifal"
      variant="default"
    />

    <!-- Main Features Grid -->
    <section aria-label="Main Features" class="my-8">
      <h2 class="text-xl md:text-2xl font-bold mb-6 flex items-center gap-2">
        <span aria-hidden="true">‚ú®</span>
        <span>Explore Vedic Astrology</span>
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Panchang -->
        <a href="/panchang" class="group">
          <GlassCard class="h-full hover:border-primary/50 transition-all group-hover:scale-[1.02]" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">üìÖ</div>
              <div>
                <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">
                  Daily Panchang
                </h3>
                <p class="text-sm text-neutral/80">
                  Tithi, nakshatra, yoga, karana for your city
                </p>
              </div>
            </div>
          </GlassCard>
        </a>

        <!-- Rahu Kaal -->
        <a href="/rahu-kaal" class="group">
          <GlassCard class="h-full hover:border-error/30 transition-all group-hover:scale-[1.02]" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">‚ö†Ô∏è</div>
              <div>
                <h3 class="font-semibold text-lg group-hover:text-error transition-colors">
                  Rahu Kaal
                </h3>
                <p class="text-sm text-neutral/80">
                  Inauspicious timing to avoid new ventures
                </p>
              </div>
            </div>
          </GlassCard>
        </a>

        <!-- Choghadiya -->
        <a href="/choghadiya" class="group">
          <GlassCard class="h-full hover:border-success/30 transition-all group-hover:scale-[1.02]" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">‚è±Ô∏è</div>
              <div>
                <h3 class="font-semibold text-lg group-hover:text-success transition-colors">
                  Choghadiya
                </h3>
                <p class="text-sm text-neutral/80">
                  Auspicious time periods for activities
                </p>
              </div>
            </div>
          </GlassCard>
        </a>

        <!-- Muhurat -->
        <a href="/muhurat" class="group">
          <GlassCard class="h-full hover:border-primary/50 transition-all group-hover:scale-[1.02]" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">üïê</div>
              <div>
                <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">
                  Shubh Muhurat
                </h3>
                <p class="text-sm text-neutral/80">
                  Auspicious dates for wedding, griha pravesh
                </p>
              </div>
            </div>
          </GlassCard>
        </a>

        <!-- Festivals -->
        <a href="/festivals" class="group">
          <GlassCard class="h-full hover:border-secondary/30 transition-all group-hover:scale-[1.02]" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">üéâ</div>
              <div>
                <h3 class="font-semibold text-lg group-hover:text-secondary transition-colors">
                  Festival Calendar
                </h3>
                <p class="text-sm text-neutral/80">
                  Hindu festivals, vrat dates & puja timings
                </p>
              </div>
            </div>
          </GlassCard>
        </a>

        <!-- Kundli -->
        <a href="/kundli" class="group">
          <GlassCard variant="elevated" class="h-full hover:border-primary/50 transition-all group-hover:scale-[1.02] gradient-border" padding="md" interactive>
            <div class="flex items-start gap-4">
              <div class="text-3xl shrink-0">üåü</div>
              <div>
                <h3 class="font-semibold text-lg text-primary group-hover:text-primary/80 transition-colors">
                  Kundli Generator
                </h3>
                <p class="text-sm text-neutral/80">
                  Create free birth chart with analysis
                </p>
              </div>
            </div>
          </GlassCard>
        </a>
      </div>
    </section>

    <!-- Upcoming Festivals -->
    <UpcomingFestivals
      title="Upcoming Festivals"
      limit={4}
      variant="default"
    />

    <!-- Panchang Elements -->
    <section aria-label="Panchang Elements" class="my-8">
      <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span aria-hidden="true">üìø</span>
        <span>Panchang Elements</span>
      </h2>
      <p class="text-neutral/80 mb-6 text-sm">
        The five elements that make up the Hindu Panchang
      </p>

      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
        <a href="/tithi" class="group">
          <GlassCard class="text-center hover:border-primary/50 transition-all group-hover:scale-105" padding="sm" interactive>
            <span class="text-3xl mb-2 block" aria-hidden="true">üåô</span>
            <p class="font-semibold text-primary">Tithi</p>
            <p class="text-[10px] text-neutral/70 mt-1">Lunar Day</p>
          </GlassCard>
        </a>

        <a href="/nakshatra" class="group">
          <GlassCard class="text-center hover:border-primary/50 transition-all group-hover:scale-105" padding="sm" interactive>
            <span class="text-3xl mb-2 block" aria-hidden="true">‚≠ê</span>
            <p class="font-semibold text-primary">Nakshatra</p>
            <p class="text-[10px] text-neutral/70 mt-1">Lunar Mansion</p>
          </GlassCard>
        </a>

        <a href="/yoga" class="group">
          <GlassCard class="text-center hover:border-primary/50 transition-all group-hover:scale-105" padding="sm" interactive>
            <span class="text-3xl mb-2 block" aria-hidden="true">‚òØÔ∏è</span>
            <p class="font-semibold text-primary">Yoga</p>
            <p class="text-[10px] text-neutral/70 mt-1">Sun-Moon Yoga</p>
          </GlassCard>
        </a>

        <a href="/karana" class="group">
          <GlassCard class="text-center hover:border-primary/50 transition-all group-hover:scale-105" padding="sm" interactive>
            <span class="text-3xl mb-2 block" aria-hidden="true">üìø</span>
            <p class="font-semibold text-primary">Karana</p>
            <p class="text-[10px] text-neutral/70 mt-1">Half Tithi</p>
          </GlassCard>
        </a>

        <a href="/vara" class="group">
          <GlassCard class="text-center hover:border-primary/50 transition-all group-hover:scale-105" padding="sm" interactive>
            <span class="text-3xl mb-2 block" aria-hidden="true">üìÖ</span>
            <p class="font-semibold text-primary">Vara</p>
            <p class="text-[10px] text-neutral/70 mt-1">Day of Week</p>
          </GlassCard>
        </a>
      </div>
    </section>

    <!-- Popular Cities -->
    <PopularCities
      pageType="panchang"
      title="Popular Cities"
      tier={1}
      limit={12}
      variant="grid"
    />

    <!-- Trust Signals -->
    <section class="py-8 border-t border-base-300/50">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-3xl mx-auto text-center">
        <div>
          <p class="text-3xl font-bold text-primary">50+</p>
          <p class="text-sm text-neutral">Cities Covered</p>
        </div>
        <div>
          <p class="text-3xl font-bold text-primary">27</p>
          <p class="text-sm text-neutral">Nakshatras</p>
        </div>
        <div>
          <p class="text-3xl font-bold text-primary">12</p>
          <p class="text-sm text-neutral">Rashis</p>
        </div>
        <div>
          <p class="text-3xl font-bold text-primary">Swiss</p>
          <p class="text-sm text-neutral">Ephemeris Accuracy</p>
        </div>
      </div>

      <p class="text-sm text-neutral/60 mt-6 text-center">
        Calculations based on <dfn class="not-italic text-primary/80">Lahiri Ayanamsa</dfn> (Indian Government standard)
      </p>
    </section>
  </div>
</Layout>
