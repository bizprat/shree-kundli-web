---
/**
 * Choghadiya Hub Page
 *
 * Overview of Choghadiya system with:
 * - Quick answer for "choghadiya today" queries
 * - City selector for specific timings
 * - Explanation of each choghadiya type
 */
import Layout from '../../layouts/Layout.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';
import CitySelector from '../../components/CitySelector.astro';
import type { BreadcrumbItem, City } from '../../lib/types';

// Load cities data
import citiesData from '../../data/cities-sample.json';
const cities = citiesData as City[];

// Today's date
const today = new Date();
const todayFormatted = today.toLocaleDateString('en-IN', {
  weekday: 'long',
  day: 'numeric',
  month: 'long',
  year: 'numeric',
});
const dayOfWeek = today.toLocaleDateString('en-US', { weekday: 'long' });

// Choghadiya types
const choghadiyaTypes = [
  {
    name: 'Amrit',
    nameHindi: 'अमृत',
    quality: 'Best',
    color: 'success',
    description: 'Most auspicious for all activities, especially important work',
    activities: ['All auspicious work', 'Starting new ventures', 'Important meetings'],
  },
  {
    name: 'Shubh',
    nameHindi: 'शुभ',
    quality: 'Good',
    color: 'success',
    description: 'Auspicious for marriage, education, and religious activities',
    activities: ['Marriage', 'Education', 'Religious ceremonies'],
  },
  {
    name: 'Labh',
    nameHindi: 'लाभ',
    quality: 'Good',
    color: 'info',
    description: 'Good for financial matters, business, and profit-related work',
    activities: ['Business deals', 'Financial transactions', 'Property matters'],
  },
  {
    name: 'Char',
    nameHindi: 'चर',
    quality: 'Good',
    color: 'info',
    description: 'Favorable for travel, journey, and movement',
    activities: ['Starting journeys', 'Travel', 'Vehicle purchase'],
  },
  {
    name: 'Kaal',
    nameHindi: 'काल',
    quality: 'Bad',
    color: 'error',
    description: 'Inauspicious period, avoid important activities',
    activities: ['Avoid new beginnings', 'Not for auspicious work'],
  },
  {
    name: 'Rog',
    nameHindi: 'रोग',
    quality: 'Bad',
    color: 'warning',
    description: 'Associated with illness, avoid health-related decisions',
    activities: ['Avoid medical decisions', 'Not for health matters'],
  },
  {
    name: 'Udveg',
    nameHindi: 'उद्वेग',
    quality: 'Bad',
    color: 'warning',
    description: 'Period of anxiety, avoid government and legal work',
    activities: ['Avoid government work', 'Not for legal matters'],
  },
];

// Page meta
const title = `Choghadiya Today (${dayOfWeek}) - Shubh Muhurat Time | आज का चौघड़िया | Shree Kundli`;
const description = `Today's Choghadiya (${todayFormatted}) - Find auspicious (Amrit, Shubh, Labh, Char) and inauspicious (Kaal, Rog, Udveg) periods. Check day and night choghadiya timings for your city. आज का चौघड़िया।`;

// Breadcrumbs
const breadcrumbs: BreadcrumbItem[] = [
  { name: 'Home', url: '/' },
  { name: 'Choghadiya' },
];

// FAQ schema
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'What is Choghadiya?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Choghadiya (चौघड़िया) is a Vedic time system that divides day and night into 8 periods each, totaling 16 periods. Each period is classified as auspicious (Amrit, Shubh, Labh, Char) or inauspicious (Kaal, Rog, Udveg) for different activities.',
      },
    },
    {
      '@type': 'Question',
      name: 'Which Choghadiya is best for important work?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Amrit Choghadiya is considered the most auspicious and best for all important activities. Shubh Choghadiya is also excellent for marriage, education, and religious work. Labh is good for financial matters, and Char is ideal for travel.',
      },
    },
    {
      '@type': 'Question',
      name: 'Which Choghadiya should be avoided?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Kaal, Rog, and Udveg Choghadiya are considered inauspicious. Kaal should be avoided for all new beginnings, Rog for health-related decisions, and Udveg for government and legal matters.',
      },
    },
  ],
};
---

<Layout title={title} description={description}>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} slot="head" />

  <div class="space-y-8">
    <!-- Breadcrumb -->
    <Breadcrumb items={breadcrumbs} />

    <!-- Header -->
    <header class="text-center space-y-4">
      <h1 class="font-heading text-3xl md:text-4xl text-primary font-bold">
        Choghadiya Today - आज का चौघड़िया
      </h1>
      <p class="text-lg text-neutral/70 max-w-2xl mx-auto">
        {dayOfWeek}, {todayFormatted}
      </p>
    </header>

    <!-- Quick Answer (AI Extraction Target) -->
    <section class="quick-answer" role="contentinfo">
      <div class="card bg-secondary/10 border border-secondary/20">
        <div class="card-body p-4 md:p-6">
          <h2 class="font-heading text-xl text-primary font-semibold mb-4">
            Choghadiya Summary
          </h2>
          <p class="text-neutral/70 mb-4">
            Choghadiya divides day and night into 8 periods each. Select your city below
            to view exact timings based on local sunrise and sunset.
          </p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="p-3 bg-success/10 rounded-lg text-center">
              <p class="text-success font-semibold">Amrit</p>
              <p class="text-xs text-neutral/60">Best for all</p>
            </div>
            <div class="p-3 bg-success/10 rounded-lg text-center">
              <p class="text-success font-semibold">Shubh</p>
              <p class="text-xs text-neutral/60">Marriage, Education</p>
            </div>
            <div class="p-3 bg-info/10 rounded-lg text-center">
              <p class="text-info font-semibold">Labh</p>
              <p class="text-xs text-neutral/60">Business, Finance</p>
            </div>
            <div class="p-3 bg-info/10 rounded-lg text-center">
              <p class="text-info font-semibold">Char</p>
              <p class="text-xs text-neutral/60">Travel</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- City Selector -->
    <section>
      <h2 class="font-heading text-xl text-primary font-semibold mb-4">
        Check Choghadiya for Your City
      </h2>
      <div class="max-w-md">
        <CitySelector
          cities={cities}
          baseUrl="/choghadiya"
          placeholder="Select your city..."
        />
      </div>
      <p class="text-sm text-neutral/50 mt-2">
        Choghadiya timing varies by location based on local sunrise and sunset times.
      </p>
    </section>

    <!-- Choghadiya Types -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-4">
        Types of Choghadiya
      </h2>

      <div class="space-y-4">
        <!-- Auspicious -->
        <div>
          <h3 class="font-semibold text-success mb-3">Auspicious (शुभ) Choghadiya</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {choghadiyaTypes
              .filter(c => c.quality === 'Best' || (c.quality === 'Good' && c.color === 'success'))
              .map((type) => (
                <div class={`card bg-${type.color}/5 border border-${type.color}/20`}>
                  <div class="card-body p-4">
                    <div class="flex items-center gap-2">
                      <span class={`badge badge-${type.color}`}>{type.quality}</span>
                      <h4 class={`font-semibold text-${type.color}`}>
                        {type.name} ({type.nameHindi})
                      </h4>
                    </div>
                    <p class="text-sm text-neutral/70 mt-2">{type.description}</p>
                    <div class="flex flex-wrap gap-1 mt-2">
                      {type.activities.map((activity) => (
                        <span class="text-xs bg-base-200 px-2 py-1 rounded">{activity}</span>
                      ))}
                    </div>
                  </div>
                </div>
              ))}
          </div>
        </div>

        <!-- Neutral/Travel -->
        <div>
          <h3 class="font-semibold text-info mb-3">Favorable Choghadiya</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {choghadiyaTypes
              .filter(c => c.color === 'info')
              .map((type) => (
                <div class={`card bg-${type.color}/5 border border-${type.color}/20`}>
                  <div class="card-body p-4">
                    <div class="flex items-center gap-2">
                      <span class={`badge badge-${type.color}`}>{type.quality}</span>
                      <h4 class={`font-semibold text-${type.color}`}>
                        {type.name} ({type.nameHindi})
                      </h4>
                    </div>
                    <p class="text-sm text-neutral/70 mt-2">{type.description}</p>
                    <div class="flex flex-wrap gap-1 mt-2">
                      {type.activities.map((activity) => (
                        <span class="text-xs bg-base-200 px-2 py-1 rounded">{activity}</span>
                      ))}
                    </div>
                  </div>
                </div>
              ))}
          </div>
        </div>

        <!-- Inauspicious -->
        <div>
          <h3 class="font-semibold text-error mb-3">Inauspicious (अशुभ) Choghadiya</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            {choghadiyaTypes
              .filter(c => c.quality === 'Bad')
              .map((type) => (
                <div class={`card bg-${type.color}/5 border border-${type.color}/20`}>
                  <div class="card-body p-4">
                    <div class="flex items-center gap-2">
                      <span class={`badge badge-${type.color}`}>{type.quality}</span>
                      <h4 class={`font-semibold text-${type.color}`}>
                        {type.name} ({type.nameHindi})
                      </h4>
                    </div>
                    <p class="text-sm text-neutral/70 mt-2">{type.description}</p>
                  </div>
                </div>
              ))}
          </div>
        </div>
      </div>
    </section>

    <!-- How Choghadiya Works -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-4">
        How Choghadiya Works
      </h2>
      <div class="card bg-base-200/50">
        <div class="card-body p-4">
          <div class="prose prose-neutral max-w-none">
            <p>
              <strong>Choghadiya</strong> (चौघड़िया) literally means "four ghatis" where one ghati equals
              24 minutes. Each choghadiya period is approximately 1.5 hours (4 ghatis).
            </p>
            <ul class="mt-3 space-y-2">
              <li><strong>Day Choghadiya:</strong> 8 periods from sunrise to sunset</li>
              <li><strong>Night Choghadiya:</strong> 8 periods from sunset to next sunrise</li>
              <li><strong>Vaar Vela:</strong> Special period at sunrise, varies by weekday</li>
              <li><strong>Kaal Vela:</strong> Special period at sunset, varies by weekday</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section>
      <h2 class="font-heading text-2xl text-primary font-bold mb-4">
        Frequently Asked Questions
      </h2>
      <div class="space-y-4">
        <div class="collapse collapse-arrow bg-base-200/50">
          <input type="radio" name="faq" checked />
          <div class="collapse-title font-medium">
            What is Choghadiya?
          </div>
          <div class="collapse-content">
            <p>Choghadiya (चौघड़िया) is a Vedic time system that divides day and night into 8 periods each, totaling 16 periods. Each period is classified as auspicious or inauspicious for different activities.</p>
          </div>
        </div>

        <div class="collapse collapse-arrow bg-base-200/50">
          <input type="radio" name="faq" />
          <div class="collapse-title font-medium">
            Which Choghadiya is best for important work?
          </div>
          <div class="collapse-content">
            <p>Amrit Choghadiya is the most auspicious for all important activities. Shubh is excellent for marriage and education. Labh is good for financial matters, and Char is ideal for travel.</p>
          </div>
        </div>

        <div class="collapse collapse-arrow bg-base-200/50">
          <input type="radio" name="faq" />
          <div class="collapse-title font-medium">
            Which Choghadiya should be avoided?
          </div>
          <div class="collapse-content">
            <p>Kaal, Rog, and Udveg are considered inauspicious. Kaal should be avoided for new beginnings, Rog for health decisions, and Udveg for government and legal matters.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Related Links -->
    <div class="flex flex-wrap gap-3 pt-4">
      <a href="/rahu-kaal" class="btn btn-outline min-h-12">
        Rahu Kaal Today
      </a>
      <a href="/muhurat" class="btn btn-ghost min-h-12">
        Shubh Muhurat →
      </a>
    </div>
  </div>
</Layout>
